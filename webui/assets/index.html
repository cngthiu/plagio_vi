<!doctype html>
<html lang="vi" data-theme="light">
<head>
  <meta charset="utf-8"/>
  <title>PlagioVi Dashboard</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="stylesheet" href="../assets/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  
<div class="app-layout">
  <aside class="sidebar">
    <div class="brand">
      <span class="brand-logo">P</span>
      <span class="brand-name">PlagioVi</span>
    </div>
    <nav class="nav-menu">
      <button class="nav-item active" data-tab="compare">
        <span class="icon">‚ö°</span> So s√°nh m·ªõi
      </button>
      <button class="nav-item" data-tab="results">
        <span class="icon">üìä</span> B√°o c√°o chi ti·∫øt
      </button>
      <button class="nav-item" data-tab="settings">
        <span class="icon">‚öôÔ∏è</span> C·∫•u h√¨nh
      </button>
    </nav>
    <div class="sidebar-footer">
      <button id="btnDark" class="btn ghost small">üåô Dark Mode</button>
    </div>
  </aside>

  <main class="main-content">
    
    <section id="tab-compare" class="tabpane active fade-in">
      <div class="header-box">
        <h1>So kh·ªõp t√†i li·ªáu</h1>
        <p class="muted">T·∫£i l√™n hai file DOCX ƒë·ªÉ ki·ªÉm tra m·ª©c ƒë·ªô tr√πng l·∫∑p n·ªôi dung.</p>
      </div>
      
      <div class="card upload-card">
        <form id="compare-form">
          <div class="upload-grid">
            <div class="upload-zone">
              <label>T√†i li·ªáu g·ªëc / Nghi v·∫•n (A)</label>
              <input type="file" id="fileA" accept=".docx" required/>
            </div>
            <div class="upload-zone">
              <label>T√†i li·ªáu ƒë·ªëi chi·∫øu (B)</label>
              <input type="file" id="fileB" accept=".docx" required/>
            </div>
          </div>
          
          <div class="controls-grid">
            <div class="input-group">
              <label>Output Directory</label>
              <input type="text" id="outDir" value="outputs/webui_run"/>
            </div>
            <div class="input-group">
               <label>Ho·∫∑c m·ªü Report c≈©</label>
               <div class="row">
                 <input type="text" id="reportPath" placeholder="outputs/.../report.json"/>
                 <button id="btnLoadReport" class="btn secondary" type="button">Load JSON</button>
               </div>
            </div>
          </div>

          <div class="action-bar">
            <button class="btn primary large" type="submit">üöÄ Ch·∫°y Ki·ªÉm Tra</button>
          </div>

          <div id="progressWrap" class="progress-container hidden">
            <div class="progress-info">
              <span id="runStatus">ƒêang x·ª≠ l√Ω...</span>
              <span id="progressPct">0%</span>
            </div>
            <div class="progress-track">
              <div class="progress-fill" id="progressBar" style="width:0%"></div>
            </div>
          </div>
        </form>
      </div>
    </section>

    <section id="tab-results" class="tabpane fade-in">
      <div class="header-box row space-between">
        <div>
          <h1>K·∫øt qu·∫£ ph√¢n t√≠ch</h1>
          <p class="muted" id="reportMeta">Ch∆∞a c√≥ d·ªØ li·ªáu.</p>
        </div>
        <div class="row gap-10">
           <button id="btnExportCSV" class="btn outline">üì• Export CSV</button>
           <button id="btnOpenHtml" class="btn outline">üåê View HTML</button>
        </div>
      </div>

      <div class="grid-metrics">
        <div class="card metric-card">
          <div class="metric-title">T·ªïng s·ªë c·∫∑p tr√πng</div>
          <div class="metric-value" id="statPairs">0</div>
        </div>
        <div class="card metric-card">
          <div class="metric-title">S·ªë t·ª´ tr√πng l·∫∑p (∆∞·ªõc t√≠nh)</div>
          <div class="metric-value warning" id="wordsText">0</div>
        </div>
        <div class="card metric-card">
          <div class="metric-title">ƒê·ªô ph·ªß (Similarity)</div>
          <div class="metric-value highlight" id="pctText">0%</div>
          <div class="metric-sub" id="coverText">0 / 0 chars</div>
        </div>
        <div class="card metric-card">
           <div class="metric-title">Ngu·ªìn ƒë·ªëi chi·∫øu m·∫°nh nh·∫•t</div>
           <div class="metric-value small" id="topSource">‚Äî</div>
        </div>
      </div>

      <div class="grid-charts">
        <div class="card chart-card">
          <h3>Ph√¢n b·ªë m·ª©c ƒë·ªô t∆∞∆°ng ƒë·ªìng</h3>
          <p class="muted small">S·ªë l∆∞·ª£ng ƒëo·∫°n vƒÉn theo thang ƒëi·ªÉm gi·ªëng nhau.</p>
          <div class="chart-wrapper">
             <canvas id="distChart"></canvas>
          </div>
        </div>
        <div class="card chart-card">
           <h3>T·ª∑ l·ªá tr√πng l·∫∑p t·ªïng th·ªÉ</h3>
           <div class="chart-wrapper donut-wrapper">
             <canvas id="donutScore"></canvas>
           </div>
        </div>
      </div>
      
      <div class="card">
        <h3>B·∫£n ƒë·ªì v·ªã tr√≠ tr√πng l·∫∑p (Document Heatmap)</h3>
        <p class="muted small">V·ªã tr√≠ c√°c ƒëo·∫°n tr√πng trong to√†n b·ªô vƒÉn b·∫£n A.</p>
        <div id="heatmapContainer" class="heatmap-track">
          </div>
      </div>

      <div class="card full-height">
        <div class="toolbar">
           <div class="filters row">
              <select id="filterLevel" class="select-box">
                <option value="">T·∫•t c·∫£ m·ª©c ƒë·ªô</option>
                <option value="very_high">üî¥ R·∫•t cao (>82%)</option>
                <option value="high">üü† Cao (>72%)</option>
                <option value="medium">üü° Trung b√¨nh (>60%)</option>
                <option value="low">‚ö™ Th·∫•p</option>
              </select>
              <input type="text" id="searchText" placeholder="üîç T√¨m n·ªôi dung..." class="search-box"/>
              <div class="score-slider">
                <label>Min Score: <span id="scoreValue">0%</span></label>
                <input type="range" id="scoreSlider" min="0" max="100" step="1" value="0"/>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="onlyMatches">
                <span class="slider"></span>
                <span class="label-text">Ch·ªâ hi·ªán ph·∫ßn tr√πng</span>
              </label>
           </div>
           <div class="pager">
              <button id="prevPage" class="btn icon-only">‚óÄ</button>
              <span id="pageInfo">1/1</span>
              <button id="nextPage" class="btn icon-only">‚ñ∂</button>
           </div>
        </div>

        <div class="split-view">
           <div class="split-col">
             <div class="col-header">VƒÉn b·∫£n A (G·ªëc)</div>
             <div id="detailA" class="col-content"></div>
           </div>
           <div class="split-col">
             <div class="col-header">VƒÉn b·∫£n B (ƒê·ªëi chi·∫øu)</div>
             <div id="detailB" class="col-content"></div>
           </div>
        </div>

        <div class="results-table-wrapper">
           <h3>Danh s√°ch c√°c ƒëo·∫°n tr√πng chi ti·∫øt</h3>
           <div id="resultsList" class="results-list"></div>
        </div>
      </div>
    </section>

    <section id="tab-settings" class="tabpane fade-in">
      <div class="card">
         <h2>C·∫•u h√¨nh thu·∫≠t to√°n</h2>
         <div class="grid2">
            <div>
               <h3>Tr·ªçng s·ªë (Weights)</h3>
               <div class="form-grid">
                  <label>Cross Encoder <input type="number" id="w_cross" step="0.05" value="0.55"></label>
                  <label>Bi Encoder <input type="number" id="w_bi" step="0.05" value="0.25"></label>
                  <label>Lexical <input type="number" id="w_lex" step="0.05" value="0.10"></label>
                  <label>BM25 <input type="number" id="w_bm25" step="0.05" value="0.10"></label>
               </div>
            </div>
            <div>
               <h3>Ng∆∞·ª°ng (Thresholds)</h3>
               <div class="form-grid">
                  <label>Very High <input type="number" id="th_vh" step="0.01" value="0.82"></label>
                  <label>High <input type="number" id="th_h" step="0.01" value="0.72"></label>
                  <label>Medium <input type="number" id="th_m" step="0.01" value="0.60"></label>
               </div>
            </div>
         </div>
         <div style="display:none">
            <input id="pen_lambda"><input id="min_span"><input id="small_span"><input id="min_small">
            <input id="bm25_topk"><input id="ann_topk"><input id="rerank_topk"><input id="simhash_topk">
            <input id="size_tokens"><input id="overlap"><input id="max_seq_bi"><input id="max_seq_cross">
         </div>
         <div class="action-bar" style="margin-top:20px">
            <button id="btnLoadSettings" class="btn">M·∫∑c ƒë·ªãnh</button>
            <button id="btnSaveSettings" class="btn primary">L∆∞u C·∫•u H√¨nh</button>
         </div>
      </div>
    </section>

  </main>
</div>
<script src="../assets/app.js"></script>
</body>
</html>
